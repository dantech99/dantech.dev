---
import { getCollection, type CollectionEntry } from "astro:content";
import Layout from "@/layouts/Layout.astro";

interface Props {
  project: CollectionEntry<"projects">;
}

export async function getStaticPaths() {
  const projects = await getCollection("projects");

  return projects.map((project) => ({
    params: { id: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props as { project: CollectionEntry<"projects"> };
const { data } = project;
const {
  title,
  description,
  img,
  date,
  links,
  tags,
  tech,
  author,
  authorImg,
  authorUrl,
} = data;

const { Content } = await project.render();
export const prerender = true;
---

<Layout title=`${title}` description={description}>
  <section class="my-20">
    <header class="flex flex-col gap-5">
      <h1
        class="text-4xl font-semibold dark:text-white text-gray-800"
        transition:name={`project-${title}`}
      >
        {title}
      </h1>
      <p>Por: {author} | Publicado el: {new Date(date).toLocaleDateString()}</p>
      <img src={img} alt="" class="rounded w-full h-auto object-cover" />
    </header>

    <main class="max-w-2xl m-auto my-10 text-pretty">
      <div
        class="prose dark:prose-invert dark:prose-a:text-yellow-300 prose-a:text-blue-700 prose-blockquote:border-blue-700"
      >
        <Content />
      </div>
    </main>
  </section>
</Layout>
